webpackJsonp([4],{377:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,u,s,l,o,d=a(63),i=r(d),c=a(13),f=r(c),p=a(64),m=r(p),h=a(14),v=r(h),g=a(15),_=r(g),y=a(8),x=r(y),b=a(84),M=r(b),S=a(85),E=r(S),w=a(0),k=r(w),A=a(2),O=r(A),j=a(142),C=a(21),D=a(976),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(D),P=a(977),q=(n=(0,j.provideHooks)({fetch:function(){var e=(0,E.default)(M.default.mark(function e(t){var a,r=t.store,n=r.dispatch,u=r.getState,s=r.inject;return M.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s({chat:L.default}),a=u(),!a.online){e.next=4;break}return e.abrupt("return",n(L.load()).catch(function(){return null}));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()}),u=(0,C.connect)(function(e){return{user:e.auth.user,messages:e.chat.messages}},(0,x.default)({},L)),n(s=u(s=(0,P.withApp)((o=l=function(e){function t(){var e,a,r,n,u=this;(0,f.default)(this,t);for(var s=arguments.length,l=Array(s),o=0;o<s;o++)l[o]=arguments[o];return a=r=(0,v.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),r.state={message:"",error:null},r.handleSubmit=function(){var e=(0,E.default)(M.default.mark(function e(t){return M.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,r.props.app.service("messages").create({text:r.state.message});case 4:r.setState({message:"",error:!1}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),r.setState({error:e.t0.message||!1});case 11:case"end":return e.stop()}},e,u,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),n=a,(0,v.default)(r,n)}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.props.app.service("messages").on("created",this.props.addMessage)}},{key:"componentWillUnmount",value:function(){this.props.app.service("messages").removeListener("created",this.props.addMessage)}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,r=t.messages,n=this.state.error;return k.default.createElement("div",{className:"container"},k.default.createElement("h1",null,"Chat"),a&&k.default.createElement("div",null,k.default.createElement("ul",null,r.map(function(e){return k.default.createElement("li",{key:"chat.msg."+e._id},e.sentBy.email,": ",e.text)})),k.default.createElement("form",{onSubmit:this.handleSubmit},k.default.createElement("input",{type:"text",ref:function(t){e.message=t},placeholder:"Enter your message",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}}),k.default.createElement("button",{className:"btn",onClick:this.handleSubmit},"Send"),n&&k.default.createElement("div",{className:"text-danger"},n))))}}]),t}(w.Component),l.propTypes={app:O.default.shape({service:O.default.func}).isRequired,user:O.default.shape({email:O.default.string}).isRequired,addMessage:O.default.func.isRequired,messages:O.default.arrayOf(O.default.object).isRequired},s=o))||s)||s)||s);t.default=q,e.exports=t.default},976:function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d:return(0,o.default)({},e,{loading:!0});case i:return(0,o.default)({},e,{loading:!1,loaded:!0,messages:t.result.data.reverse()});case c:return(0,o.default)({},e,{loading:!1,loaded:!1,error:t.error});case f:return(0,o.default)({},e,{messages:e.messages.concat(t.message)});default:return e}}function n(e){return e.chat&&e.chat.loaded}function u(){return{types:[d,i,c],promise:function(e){return e.app.service("messages").find({query:{$sort:{createdAt:-1},$limit:25}})}}}function s(e){return{type:f,message:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(8),o=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=r,t.isLoaded=n,t.load=u,t.addMessage=s;var d="redux-example/chat/LOAD",i="redux-example/chat/LOAD_SUCCESS",c="redux-example/chat/LOAD_FAIL",f="redux-example/chat/ADD_MESSAGE",p={loaded:!1,messages:[]}},977:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.withStore=t.withApp=void 0;var n=a(978),u=r(n),s=a(979),l=r(s);t.withApp=u.default,t.withStore=l.default},978:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(373),n=a(2),u=function(e){return e&&e.__esModule?e:{default:e}}(n),s=(0,r.getContext)({app:u.default.any});t.default=s,e.exports=t.default},979:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(373),n=a(2),u=function(e){return e&&e.__esModule?e:{default:e}}(n),s=(0,r.getContext)({store:u.default.any});t.default=s,e.exports=t.default}});